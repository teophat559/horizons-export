# VPS Environment Configuration for Horizons Export
# Copy this file to .env and update the values for your VPS deployment

# ================================================
# APPLICATION SETTINGS
# ================================================

NODE_ENV=production
PORT=4000

# ================================================
# DATABASE CONFIGURATION
# ================================================

# PostgreSQL connection string
# Update the password and other details as needed
DATABASE_URL=postgresql://horizons_user:CHANGE_THIS_PASSWORD@localhost:5432/horizons_export

# ================================================
# SECURITY CONFIGURATION
# ================================================

# JWT secret for token signing (MUST BE CHANGED!)
# Generate a strong random string: openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_TO_A_VERY_SECURE_JWT_SECRET_KEY

# Admin authentication key (MUST BE CHANGED!)
# This is used for admin panel access
ADMIN_KEY=CHANGE_THIS_TO_A_VERY_SECURE_ADMIN_KEY

# ================================================
# CORS CONFIGURATION
# ================================================

# Allowed origins for CORS (update with your domain)
# Example: https://example.com,https://www.example.com
ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com

# ================================================
# RATE LIMITING (Optional)
# ================================================

# Rate limiting window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100

# ================================================
# FILE UPLOAD SETTINGS (Optional)
# ================================================

# Maximum file size in bytes (default: 10MB)
MAX_FILE_SIZE=10485760

# Upload directory (relative to backend root)
UPLOAD_DIR=uploads

# ================================================
# LOGGING CONFIGURATION (Optional)
# ================================================

# Log level: error, warn, info, debug
LOG_LEVEL=info

# Log directory
LOG_DIR=/var/log/horizons-export

# ================================================
# SESSION CONFIGURATION (Optional)
# ================================================

# Session secret for express-session
SESSION_SECRET=CHANGE_THIS_TO_A_SECURE_SESSION_SECRET

# Session timeout in milliseconds (default: 24 hours)
SESSION_TIMEOUT=86400000

# ================================================
# EXTERNAL SERVICES (Optional)
# ================================================

# Telegram notifications (if enabled)
# TELEGRAM_BOT_TOKEN=your_telegram_bot_token
# TELEGRAM_CHAT_ID=your_telegram_chat_id

# Email service configuration (if needed)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password

# ================================================
# PERFORMANCE SETTINGS (Optional)
# ================================================

# Number of PM2 instances (set to 0 for max CPU cores)
PM2_INSTANCES=1

# Enable compression
ENABLE_COMPRESSION=true

# Static file cache duration in seconds (default: 1 hour)
STATIC_CACHE_DURATION=3600

# ================================================
# DEVELOPMENT/DEBUG SETTINGS
# ================================================

# Enable request logging
ENABLE_REQUEST_LOGGING=true

# Enable debug mode (DO NOT enable in production!)
DEBUG_MODE=false

# ================================================
# BACKUP CONFIGURATION (Optional)
# ================================================

# Database backup configuration
# BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
# BACKUP_RETENTION_DAYS=7
# BACKUP_STORAGE_PATH=/var/backups/horizons-export

# ================================================
# MONITORING (Optional)
# ================================================

# Health check endpoint timeout in milliseconds
HEALTH_CHECK_TIMEOUT=5000

# Performance monitoring
# PM2_PUBLIC_KEY=your_pm2_plus_public_key
# PM2_SECRET_KEY=your_pm2_plus_secret_key

# ================================================
# NOTES FOR VPS DEPLOYMENT
# ================================================

# 1. SECURITY REQUIREMENTS:
#    - Change ALL default passwords and secrets
#    - Use strong, randomly generated values
#    - Never use default values in production

# 2. DATABASE SETUP:
#    - Ensure PostgreSQL is running
#    - Create the database and user manually if needed:
#      sudo -u postgres createdb horizons_export
#      sudo -u postgres createuser horizons_user

# 3. FILE PERMISSIONS:
#    - Ensure the backend process can write to LOG_DIR and UPLOAD_DIR
#    - Set appropriate file permissions for security

# 4. FIREWALL CONFIGURATION:
#    - Only expose necessary ports (80, 443, 22)
#    - Database port (5432) should not be exposed externally

# 5. SSL CERTIFICATES:
#    - Use Let's Encrypt for free SSL certificates
#    - Configure nginx to handle SSL termination

# 6. MONITORING:
#    - Set up log rotation for application logs
#    - Monitor disk space and system resources
#    - Consider using PM2 Plus for advanced monitoring

# 7. BACKUP STRATEGY:
#    - Regular database backups
#    - Backup uploaded files and configuration
#    - Test backup restoration procedures